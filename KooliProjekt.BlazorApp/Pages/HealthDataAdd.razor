@page "/healthdata/add"
@inject NavigationManager Navigation
@inject IApiClient ApiClient

<PageTitle>Lisa uus</PageTitle>

<h3>Terviseandmete lisamine</h3>

<EditForm Model="@healthData" OnValidSubmit="@HandleValidSubmit">
    <DataAnnotationsValidator />

    <div class="form-group">
        <label>Kaal:</label>
        <InputNumber @bind-Value="@healthData.Weight" class="form-control" />
    </div>

    <div class="form-group">
        <label>Verrerõhk:</label>
        <InputNumber @bind-Value="@healthData.Blood_pressure" class="form-control" />
    </div>

    <div class="form-group">
        <label>Veresuhkur:</label>
        <InputNumber @bind-Value="@healthData.Blood_sugar" class="form-control" />
    </div>

    <button type="submit" class="btn btn-primary mt-3">Salvesta</button>
</EditForm>

@code {
    private HealthData healthData = new();

    private async Task HandleValidSubmit()
    {
        await ApiClient.Save(healthData);
        Navigation.NavigateTo("/");
    }
}
